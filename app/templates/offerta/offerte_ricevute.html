{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <div class="row">
    <div class="col-md-12">
      <h1 class="mb-4">
        <i class="fas fa-paper-plane"></i> Le Tue Offerte Inviate
        {% if offerte %}
          <span class="badge bg-primary">{{ offerte|length }}</span>
        {% endif %}
      </h1>

      {% if offerte %}
        <div class="list-group">
          {% for offerta in offerte %}
            <div class="list-group-item list-group-item-action mb-3 p-4" style="border-radius: 10px; border-left: 5px solid #28a745;">
              
              <!-- Intestazione -->
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                  <h5 class="mb-1">
                    <i class="fas fa-home"></i>
                    {{ offerta['via'] }}, {{ offerta['civico'] }}
                  </h5>
                  <small class="text-muted">
                    <i class="fas fa-calendar-alt"></i>
                    {{ offerta['created'][:10] }}
                  </small>
                </div>
                <div>
                  <span class="badge bg-success">
                    <i class="fas fa-check-circle"></i> Inviata
                  </span>
                </div>
              </div>

              <!-- Proprietario -->
              <div class="mb-3">
                <small class="text-muted">
                  <i class="fas fa-user-tie"></i> <strong>Proprietario:</strong> {{ offerta['proprietario'] }}
                </small>
              </div>

              <!-- Il tuo messaggio -->
              <div class="mb-3">
                <strong>Il Tuo Messaggio:</strong>
                <p class="mt-2" style="background-color: #e7f5f0; padding: 15px; border-radius: 8px; border-left: 3px solid #28a745;">
                  {{ offerta['messaggio'] }}
                </p>
              </div>

              <!-- Azioni -->
              <div class="d-flex gap-2">
                <a href="mailto:{{ offerta['email'] }}?subject=Re: Offerta per {{ offerta['via'] }}" class="btn btn-sm btn-info">
                  <i class="fas fa-envelope"></i> Scrivi al Proprietario
                </a>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="alert alert-info text-center py-5">
          <i class="fas fa-paper-plane" style="font-size: 3rem;"></i>
          <h4 class="mt-3">Nessuna offerta inviata</h4>
          <p class="text-muted">Non hai ancora inviato offerte.</p>
          <a href="{{ url_for('main.index') }}" class="btn btn-primary mt-3">
            <i class="fas fa-search"></i> Sfoglia Case Disponibili
          </a>
        </div>
      {% endif %}

      <div class="mt-4">
        <a href="{{ url_for('main.index') }}" class="btn btn-secondary btn-lg">
          <i class="fas fa-arrow-left"></i> Torna alla Home
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .list-group-item {
    border: none;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
  }
  
  .list-group-item:hover {
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
</style>
{% endblock %}
